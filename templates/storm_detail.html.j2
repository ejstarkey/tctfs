{% extends "layout.html.j2" %}

{% block title %}{{ storm.name or storm.storm_id }} - Storm Detail{% endblock %}

{% block head %}
<link rel="stylesheet" href="/static/css/map.css">
<script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
<link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Storm Header -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">
                    {{ storm.name or 'UNNAMED' }}
                    <span class="text-gray-500 text-2xl ml-2">{{ storm.storm_id }}</span>
                </h1>
                <p class="text-gray-600 mt-1">Basin: {{ storm.basin }} | Status: {{ storm.status }}</p>
            </div>
            <div class="text-right">
                <div class="text-sm text-gray-500">Last Updated</div>
                <div class="text-lg font-semibold">{{ storm.last_seen.strftime('%Y-%m-%d %H:%M UTC') if storm.last_seen else 'N/A' }}</div>
            </div>
        </div>
    </div>

    <!-- Current Observations -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-xl font-bold mb-4">Current Observations</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div>
                <div class="text-sm text-gray-500">Maximum Winds</div>
                <div class="text-2xl font-bold text-blue-600" id="current-vmax">-- kt</div>
            </div>
            <div>
                <div class="text-sm text-gray-500">Minimum Pressure</div>
                <div class="text-2xl font-bold text-blue-600" id="current-mslp">-- mb</div>
            </div>
            <div>
                <div class="text-sm text-gray-500">Position</div>
                <div class="text-lg font-semibold" id="current-position">--°, --°</div>
            </div>
            <div>
                <div class="text-sm text-gray-500">Category</div>
                <div class="text-2xl font-bold text-orange-600" id="current-category">--</div>
            </div>
        </div>
    </div>

    <!-- Map Container -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden" style="height: 600px; position: relative;" data-storm-id="{{ storm.storm_id }}" data-basin="{{ storm.basin }}">
        <div id="storm-map" style="width: 100%; height: 100%;"></div>
    </div>
</div>

<script src="/static/js/storm_map.js"></script>
{% endblock %}
